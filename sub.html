<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ALOS_ Chatbot</title>
    <style>
        :root { --bg: #0f172a; --text: #f8fafc; --accent: #38bdf8; }
        body { background: var(--bg); color: var(--text); font-family: 'Inter', sans-serif; margin: 0; display: flex; flex-direction: column; height: 100vh; align-items: center; }
        
        /* Layout: 60% center on desktop, 95% on mobile */
        .container { width: 60%; display: flex; flex-direction: column; height: 100%; transition: width 0.3s; }
        @media (max-width: 768px) { .container { width: 95%; } }

        /* Header with blinking underscore */
        header { text-align: center; padding: 20px; font-size: 2rem; font-weight: bold; letter-spacing: 2px; }
        .cursor { animation: blink 1s infinite; color: var(--accent); }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }

        /* Chat Area */
        #chat-box { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 15px; border-bottom: 1px solid #334155; }
        .msg { padding: 10px 15px; border-radius: 8px; max-width: 80%; line-height: 1.5; }
        .user { align-self: flex-end; background: var(--accent); color: #000; }
        .bot { align-self: flex-start; background: #1e293b; border: 1px solid #334155; }

        /* Input Section */
        .input-area { padding: 20px; display: flex; flex-direction: column; gap: 10px; }
        textarea { background: #1e293b; border: 1px solid #334155; color: white; padding: 12px; border-radius: 8px; resize: none; font-size: 1rem; }
        button { background: var(--accent); border: none; padding: 10px; border-radius: 8px; cursor: pointer; font-weight: bold; }

        /* Footer */
        footer { padding: 15px; font-size: 0.7rem; opacity: 0.5; text-align: center; letter-spacing: 3px; }
    </style>
</head>
<body>

    <div class="container">
        <header>ALOS<span class="cursor">_</span></header>

        <div style="font-size: 10px; opacity: 0.3; padding: 0 20px;">SYSTEM: Act as a helpful assistant.</div>

        <div id="chat-box"></div>

        <div class="input-area">
            <textarea id="userInput" rows="2" placeholder="Ask ALOS_ anything..."></textarea>
            <button onclick="handleSend()">SEND MESSAGE</button>
        </div>

        <footer>FIREBASE &nbsp;|&nbsp; GEMINI AI</footer>
    </div>

    <script>
        // CHERRY ON TOP: The Reversed String Obfuscation
        // 1. Reverse your actual key and paste it here
        const _k = "AIzaSyAO0OfW34GELdDk1yjO3HDMFOzaPEQjNoI"; 
        const getK = () => _k.split("").reverse().join("");

        const chatBox = document.getElementById('chat-box');

        async function handleSend() {
            const input = document.getElementById('userInput');
            const text = input.value.trim();
            if (!text) return;

            // Add User Bubble
            addBubble(text, 'user');
            input.value = '';

            // Add Bot Bubble (Empty for now)
            const botBubble = addBubble("", 'bot');
            
            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${getK()}`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: text }] }]
                    })
                });

                const data = await response.json();
                const reply = data.candidates[0].content.parts[0].text;
                
                // LIVE TYPING EFFECT
                typeEffect(botBubble, reply);
            } catch (err) {
                botBubble.innerText = "Error: Key restricted or limit reached.";
            }
        }

        function addBubble(text, type) {
            const div = document.createElement('div');
            div.className = `msg ${type}`;
            div.innerText = text;
            chatBox.appendChild(div);
            chatBox.scrollTop = chatBox.scrollHeight;
            return div;
        }

        // Live typing like ChatGPT
        function typeEffect(element, text) {
            let i = 0;
            const interval = setInterval(() => {
                element.innerText += text.charAt(i);
                i++;
                chatBox.scrollTop = chatBox.scrollHeight;
                if (i >= text.length) clearInterval(interval);
            }, 20); // Speed of typing
        }
    </script>
</body>
</html>
